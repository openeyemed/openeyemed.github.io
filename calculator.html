<!DOCTYPE html>
<html>
<head>
    <title>Investment Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h1>Investment Calculator</h1>

<label for="investorShares">Investor's Shares: </label>
<input type="number" id="investorShares"><br>

<label for="netProfit">Quarterly Net Profit After Reserves & Taxes* </label>
<input type="number" id="netProfit"><br>

<label for="term">Term (in years): </label>
<select id="term">
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
</select><br>

<p>*This refers to the first quarterly profit period total. A CAGR of 25% will be used for illustration purposes.</p>

<button onclick="calculate()">Calculate</button>

<h2>Results</h2>
<p id="quarterlyResults"></p>
<p id="totalPaid"></p>
<p id="valuationResults"></p>

<canvas id="distributionChart"></canvas>
<canvas id="valuationChart"></canvas>

<script>
function calculate() {
    if (window.myChart1) window.myChart1.destroy();
    if (window.myChart2) window.myChart2.destroy();

    const investorShares = parseFloat(document.getElementById("investorShares").value);
    let netProfit = parseFloat(document.getElementById("netProfit").value);
    const term = parseInt(document.getElementById("term").value);
    
    let quarterlyDistributions = [];
    let totalPaid = 0;
    let yearlyValuations = [];
    
    let yearlyProfit = netProfit * 4;
    let initialValuation = investorShares;  // Initial valuation set to the number of shares
    yearlyValuations.push(initialValuation);
    
    for (let i = 1; i < term; i++) {
        yearlyProfit *= 1.25;
        const valuation = yearlyProfit * 4;
        const investorValuation = (investorShares / 2000000) * valuation;
        yearlyValuations.push(investorValuation);
    }
    
    document.getElementById("quarterlyResults").innerText = "Quarterly Distributions: " + quarterlyDistributions.map((d, i) => `Q${i+1}: $${d.toLocaleString('en-US', {minimumFractionDigits: 2})}`).join(", ");
    document.getElementById("totalPaid").innerText = "Total Paid to Investor: $" + totalPaid.toLocaleString('en-US', {minimumFractionDigits: 2});
    document.getElementById("valuationResults").innerText = "Shareholder's Potential Valuation of Shares: " + yearlyValuations.map((v, i) => `Year ${i+1}: $${v.toLocaleString('en-US', {minimumFractionDigits: 2})}`).join(", ");
    
    const ctx1 = document.getElementById('distributionChart').getContext('2d');
    window.myChart1 = new Chart(ctx1, {
        type: 'line',
        data: {
            labels: Array.from({length: term * 4}, (_, i) => 'Q' + (i + 1)),
            datasets: [{
                label: 'Quarterly Distributions',
                data: quarterlyDistributions,
                borderColor: 'blue',
                fill: false
            }]
        }
    });
    
    const ctx2 = document.getElementById('valuationChart').getContext('2d');
    window.myChart2 = new Chart(ctx2, {
        type: 'line',
        data: {
            labels: Array.from({length: term}, (_, i) => 'Year ' + (i + 1)),
            datasets: [{
                label: 'Yearly Valuations',
                data: yearlyValuations,
                borderColor: 'red',
                fill: false
            }]
        }
    });
}
</script>

</body>
</html>
